<!--記録一覧から遷移し、削除機能へのリンクをつけるよ。記録した本人だけが削除できるよ。-->
<%= turbo_frame_tag @record do %>
  <div class="bg-secondary-subtle py-2 my-2 mx-auto rounded">
    <%= link_to family_records_path(@record.user.family), class: "text-decoration-none text-body" do %>
      <div class="row pb-2 border-bottom border-secondary">
        <div class="col-1 d-flex align-items-center"></div>
        <div class="col-3 d-flex align-items-center"><%= @user.nickname.present? ? @user.nickname : @user.name %></div>
        <div class="col-4 d-flex align-items-center"><%= @record.count >= 2 ? "#{@task.title} x #{@record.count}" : @task.title %></div>
        <div class="col-1 d-flex align-items-center"><%= @task.points * @record.count.to_i %></div>
        <div class="col-3 d-flex align-items-center"><%= l(@record.created_at, format: :short) %></div>
      </div>
    <% end %>
      <div class="center-block">
        <% if @user == current_user %>
          <div class="text-center">
            <%= button_to '削除する', family_task_user_path(@family, @record), class: "btn btn-danger mb-2", method: :delete, data: { turbo_confirm: 'ポイントが減ります。本当に削除しますか？', turbo_frame: '_top' } %>
          </div>
        <% end %>
      </div>
  </div>
<% end %>